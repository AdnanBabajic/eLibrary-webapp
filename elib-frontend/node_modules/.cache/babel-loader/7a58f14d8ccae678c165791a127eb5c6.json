{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Lenovo\\\\Desktop\\\\Codecta react\\\\Project\\\\elib-frontend\\\\src\\\\components\\\\Books.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport './Books.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const Books = () => {\n  _s();\n\n  const [books, setBooks] = useState([]);\n  const [filteredBooks, setFilteredBooks] = useState([]);\n  const [selectedBook, setSelectedBook] = useState(null);\n  const [isDialogOpen, setIsDialogOpen] = useState(false);\n  const [searchParam, setSearchParam] = useState('');\n  useEffect(async () => {\n    const res = await fetch('http://localhost:8080/elibrary/book', {\n      method: 'GET',\n      headers: {\n        'Content-type': 'application/json',\n        'Accept': 'application/json',\n        'Access-Control-Allow-Headers': '*',\n        'Access-Control-Allow-Credentials': 'true',\n        'Access-Control-Allow-Methods': 'GET, HEAD, OPTIONS, POST, PUT',\n        'Access-Control-Allow-Origin': 'http://localhost:3000/'\n      }\n    });\n    setBooks(res);\n    setFilteredBooks(res);\n  }, []);\n\n  const deleteBook = async id => event => {\n    fetch(`http://localhost:8080/elibrary/book/${id}/delete`, {\n      method: 'DELETE',\n      headers: {\n        'Content-type': 'application/json',\n        'Accept': 'application/json',\n        'Access-Control-Allow-Headers': '*',\n        'Access-Control-Allow-Credentials': 'true',\n        'Access-Control-Allow-Methods': 'GET, HEAD, OPTIONS, POST, PUT',\n        'Access-Control-Allow-Origin': 'http://localhost:3000/'\n      }\n    });\n    event.stopPropagation();\n    const filteredArray = books.filter(element => element.id !== id);\n    const res = fetch('http://localhost:8080/elibrary/book', {\n      method: 'GET',\n      headers: {\n        'Content-type': 'application/json',\n        'Accept': 'application/json',\n        'Access-Control-Allow-Headers': '*',\n        'Access-Control-Allow-Credentials': 'true',\n        'Access-Control-Allow-Methods': 'GET, HEAD, OPTIONS, POST, PUT',\n        'Access-Control-Allow-Origin': 'http://localhost:3000/'\n      }\n    });\n    setBooks(res);\n    setBooks(filteredArray);\n  };\n\n  const openEditDialog = id => event => {\n    setSelectedBook(id);\n    setIsDialogOpen(true);\n  };\n\n  const handleClose = () => {\n    setIsDialogOpen(false);\n  };\n\n  const handleSaveAndClose = book => {\n    updateUser(book);\n    setIsDialogOpen(false);\n  };\n\n  const updateUser = book => {\n    const booksAray = books;\n    const bookToEdit = booksAray.find(x => x.id === book.id);\n    bookToEdit.name = book.name;\n    bookToEdit.writer = book.writer;\n    bookToEdit.genre = book.genre;\n    setBooks(booksAray);\n  };\n\n  const handleChange = event => {\n    setSearchParam(event.target.value);\n  };\n\n  useEffect(() => {\n    if (books.length > 0) {\n      const filteredUsers = books.filter(x => x.name.includes(searchParam));\n      setFilteredBooks(filteredUsers);\n    }\n  }, [searchParam]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"usersComponent\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"usersList\",\n      children: [/*#__PURE__*/_jsxDEV(TextField, {\n        label: \"Search\",\n        variant: \"outlined\",\n        value: searchParam,\n        onChange: handleChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(TableContainer, {\n        component: Paper,\n        children: /*#__PURE__*/_jsxDEV(Table, {\n          \"aria-label\": \"simple table\",\n          children: [/*#__PURE__*/_jsxDEV(TableHead, {\n            children: /*#__PURE__*/_jsxDEV(TableRow, {\n              children: [/*#__PURE__*/_jsxDEV(TableCell, {\n                children: \"Name\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 99,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                children: \"Writer\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 100,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                children: \"Genre\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 101,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 102,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 98,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(TableBody, {\n            children: filteredBooks.map((row, index) => /*#__PURE__*/_jsxDEV(TableRow, {\n              onClick: openEditDialog(row),\n              classes: {\n                root: \"tableRow\"\n              },\n              children: [/*#__PURE__*/_jsxDEV(TableCell, {\n                children: row.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 108,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                children: row.writer\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 109,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                children: row.genre\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 110,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                children: /*#__PURE__*/_jsxDEV(Tooltip, {\n                  title: \"Delete book\",\n                  placement: \"top\",\n                  arrow: true,\n                  children: /*#__PURE__*/_jsxDEV(DeleteIcon, {\n                    className: \"actionIcon\",\n                    onClick: deleteBook(row.id)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 113,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 112,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 111,\n                columnNumber: 21\n              }, this)]\n            }, index, true, {\n              fileName: _jsxFileName,\n              lineNumber: 107,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 9\n    }, this), selectedBook && /*#__PURE__*/_jsxDEV(EditUserDialog, {\n      open: isDialogOpen,\n      handleClose: handleClose,\n      selectedBook: selectedBook,\n      handleSaveAndClose: handleSaveAndClose\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 26\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 92,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Books, \"3epBggCT12TWQXadW5W1ZOUkzQk=\");\n\n_c = Books;\n\nvar _c;\n\n$RefreshReg$(_c, \"Books\");","map":{"version":3,"sources":["C:/Users/Lenovo/Desktop/Codecta react/Project/elib-frontend/src/components/Books.js"],"names":["React","Books","books","setBooks","useState","filteredBooks","setFilteredBooks","selectedBook","setSelectedBook","isDialogOpen","setIsDialogOpen","searchParam","setSearchParam","useEffect","res","fetch","method","headers","deleteBook","id","event","stopPropagation","filteredArray","filter","element","openEditDialog","handleClose","handleSaveAndClose","book","updateUser","booksAray","bookToEdit","find","x","name","writer","genre","handleChange","target","value","length","filteredUsers","includes","Paper","map","row","index","root"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport './Books.css'\r\n\r\nexport const Books = () => {\r\n    const [books, setBooks] = useState([]);\r\n    const [filteredBooks, setFilteredBooks] = useState([]);\r\n    const [selectedBook, setSelectedBook]=useState(null)\r\n    const [isDialogOpen, setIsDialogOpen]=useState(false)\r\n    const [searchParam, setSearchParam]=useState('')\r\n    \r\n    useEffect(async() => {\r\n        const res = await fetch('http://localhost:8080/elibrary/book', {\r\n            method: 'GET',\r\n            headers: {\r\n              'Content-type': 'application/json',\r\n              'Accept': 'application/json',\r\n              'Access-Control-Allow-Headers': '*',\r\n              'Access-Control-Allow-Credentials': 'true',\r\n              'Access-Control-Allow-Methods': 'GET, HEAD, OPTIONS, POST, PUT',\r\n              'Access-Control-Allow-Origin': 'http://localhost:3000/',\r\n            }\r\n        })\r\n      setBooks(res)\r\n      setFilteredBooks(res)\r\n    }, []);\r\n  \r\n    const deleteBook = async(id) => (event) => {\r\n        fetch(`http://localhost:8080/elibrary/book/${id}/delete`, {\r\n            method: 'DELETE',\r\n            headers: {\r\n              'Content-type': 'application/json',\r\n              'Accept': 'application/json',\r\n              'Access-Control-Allow-Headers': '*',\r\n              'Access-Control-Allow-Credentials': 'true',\r\n              'Access-Control-Allow-Methods': 'GET, HEAD, OPTIONS, POST, PUT',\r\n              'Access-Control-Allow-Origin': 'http://localhost:3000/',\r\n            }\r\n        })\r\n      event.stopPropagation();\r\n      const filteredArray = books.filter((element) => element.id !== id);\r\n\r\n      const res = fetch('http://localhost:8080/elibrary/book', {\r\n        method: 'GET',\r\n        headers: {\r\n          'Content-type': 'application/json',\r\n          'Accept': 'application/json',\r\n          'Access-Control-Allow-Headers': '*',\r\n          'Access-Control-Allow-Credentials': 'true',\r\n          'Access-Control-Allow-Methods': 'GET, HEAD, OPTIONS, POST, PUT',\r\n          'Access-Control-Allow-Origin': 'http://localhost:3000/',\r\n        }\r\n    })\r\n  setBooks(res)\r\n      setBooks(filteredArray);\r\n    };\r\n  \r\n    const openEditDialog =  (id) => (event) => {\r\n      setSelectedBook(id)\r\n      setIsDialogOpen(true)\r\n    }\r\n  \r\n    const handleClose = ()=>{\r\n      setIsDialogOpen(false)\r\n    }\r\n  \r\n    const handleSaveAndClose = (book)=>{\r\n      updateUser(book)\r\n      setIsDialogOpen(false)\r\n    }\r\n  \r\n    const updateUser=(book)=>{\r\n      const booksAray = books;\r\n      const bookToEdit = booksAray.find(x=> x.id===book.id)\r\n      bookToEdit.name= book.name\r\n      bookToEdit.writer=book.writer\r\n      bookToEdit.genre=book.genre\r\n      \r\n      setBooks(booksAray)\r\n    }\r\n  \r\n    const handleChange=(event)=>{\r\n      setSearchParam(event.target.value)\r\n    }\r\n  \r\n    useEffect(() => {\r\n      if (books.length > 0) {\r\n        const filteredUsers = books.filter((x) => x.name.includes(searchParam));\r\n        setFilteredBooks(filteredUsers);\r\n      }\r\n    }, [searchParam]);\r\n    return (\r\n        <div className=\"usersComponent\">\r\n        <div className=\"usersList\">\r\n        <TextField label=\"Search\" variant=\"outlined\" value={searchParam} onChange={handleChange}/>\r\n          <TableContainer component={Paper}>\r\n            <Table aria-label=\"simple table\">\r\n              <TableHead>\r\n                <TableRow>\r\n                  <TableCell>Name</TableCell>\r\n                  <TableCell>Writer</TableCell>\r\n                  <TableCell>Genre</TableCell>\r\n                  <TableCell></TableCell>\r\n                </TableRow>\r\n              </TableHead>\r\n              <TableBody>\r\n                {filteredBooks.map((row, index) => (\r\n                  <TableRow key={index} onClick={openEditDialog(row)} classes={{root:\"tableRow\"}}>\r\n                    <TableCell>{row.name}</TableCell>\r\n                    <TableCell>{row.writer}</TableCell>\r\n                    <TableCell>{row.genre}</TableCell>\r\n                    <TableCell>\r\n                      <Tooltip title=\"Delete book\" placement=\"top\" arrow={true}>\r\n                        <DeleteIcon\r\n                          className=\"actionIcon\"\r\n                          onClick={deleteBook(row.id)}\r\n                        />\r\n                      </Tooltip>\r\n                    </TableCell>\r\n                  </TableRow>\r\n                ))}\r\n              </TableBody>\r\n            </Table>\r\n          </TableContainer>\r\n        </div>\r\n        {selectedBook && <EditUserDialog open={isDialogOpen} handleClose={handleClose} selectedBook={selectedBook} handleSaveAndClose={handleSaveAndClose}/>}\r\n      </div>\r\n    )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}